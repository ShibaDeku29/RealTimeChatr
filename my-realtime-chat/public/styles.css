/* =========
   Realtime Chat Pro – styles.css (modern, smooth)
   ========= */

/* ---------- CSS Variables ---------- */
:root{
  /* palette */
  --bg: #f6f8fc;
  --bg-elev: #ffffff;
  --text: #0f172a;
  --muted: #6b7280;
  --border: #e5e7eb;
  --ring: #93c5fd;
  --primary: #4f46e5;
  --primary-2: #06b6d4;
  --ok: #16a34a;
  --warn: #f59e0b;
  --err: #ef4444;

  /* radii & shadow */
  --r-sm: 10px;
  --r-md: 16px;
  --r-lg: 20px;
  --shadow-1: 0 8px 24px rgba(15, 23, 42, .06);
  --shadow-2: 0 18px 50px rgba(15, 23, 42, .10);

  /* spacing */
  --space: 16px;

  /* motion */
  --dur: .18s;
  --ease: cubic-bezier(.2,.8,.2,1);
}

/* Dark mode (tự động theo hệ thống) */
@media (prefers-color-scheme: dark){
  :root{
    --bg: #0b1020;
    --bg-elev: #0f1528;
    --text: #e5e7eb;
    --muted: #94a3b8;
    --border: #1f2937;
    --ring: #60a5fa;
    --shadow-1: 0 10px 28px rgba(0,0,0,.35);
    --shadow-2: 0 22px 70px rgba(0,0,0,.45);
  }
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce){
  :root{ --dur: 0s; }
}

/* ---------- Base ---------- */
*{ box-sizing: border-box }
html, body{ height: 100% }
body{
  margin: 0;
  font: 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--text);
  background:
    radial-gradient(900px 600px at 10% -10%, rgba(79,70,229,.08), transparent 60%),
    radial-gradient(700px 500px at 110% 10%, rgba(6,182,212,.08), transparent 60%),
    var(--bg);
}

/* Smooth container */
.wrap{
  max-width: 1100px;
  margin: 0 auto;
  padding: calc(var(--space) + 6px);
}

/* Cards */
.card{
  background: var(--bg-elev);
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  box-shadow: var(--shadow-1);
  padding: var(--space);
  transition: box-shadow var(--dur) var(--ease), transform var(--dur) var(--ease), border-color var(--dur) var(--ease);
}
.card:hover{ box-shadow: var(--shadow-2) }

/* Top bar */
.topbar{
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 14px;
  gap: 12px;
}
.topbar h2{
  margin: 0;
  font-size: 22px;
  letter-spacing: .2px;
}

/* Grid 2 cột */
.side{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space);
}
@media (max-width: 900px){
  .side{ grid-template-columns: 1fr; }
}

/* Rows & Cols */
.row{ display: flex; align-items: center; gap: 10px; }
.col{ display: flex; flex-direction: column; gap: 10px; }

/* Inputs */
input, textarea{
  width: 100%;
  padding: 12px 14px;
  border-radius: var(--r-md);
  border: 1px solid var(--border);
  background: linear-gradient(180deg, var(--bg-elev), color-mix(in srgb, var(--bg-elev) 92%, #000 8%));
  color: var(--text);
  outline: none;
  transition: border-color var(--dur) var(--ease), box-shadow var(--dur) var(--ease), transform var(--dur) var(--ease), background var(--dur) var(--ease);
}
input::placeholder, textarea::placeholder{ color: var(--muted) }
input:focus, textarea:focus{
  border-color: color-mix(in srgb, var(--ring) 70%, var(--border));
  box-shadow: 0 0 0 5px color-mix(in srgb, var(--ring) 22%, transparent);
  transform: translateY(-1px);
}

/* Buttons */
button{
  appearance: none;
  border: 1px solid var(--border);
  background: var(--bg-elev);
  color: var(--text);
  padding: 10px 14px;
  border-radius: var(--r-md);
  cursor: pointer;
  transition: background var(--dur) var(--ease), border-color var(--dur) var(--ease), transform var(--dur) var(--ease), box-shadow var(--dur) var(--ease);
}
button:hover{ background: color-mix(in srgb, var(--bg-elev) 88%, #000 12%); }
button:active{ transform: translateY(1px); }
button:focus-visible{
  outline: none;
  box-shadow: 0 0 0 5px color-mix(in srgb, var(--ring) 22%, transparent);
  border-color: color-mix(in srgb, var(--ring) 60%, var(--border));
}

/* Primary-style (nếu cần) */
.btn{
  border: none;
  background: linear-gradient(135deg, var(--primary), var(--primary-2));
  color: #fff;
  box-shadow: 0 8px 20px rgba(79,70,229,.25);
}
.btn:hover{ box-shadow: 0 14px 32px rgba(79,70,229,.28); }
.btn.ghost{
  background: var(--bg-elev);
  color: var(--text);
  border: 1px solid var(--border);
  box-shadow: none;
}
.btn.small{ padding: 8px 10px; border-radius: var(--r-sm) }

/* Scroll areas */
#log, .scrollbox{
  height: 420px;
  overflow: auto;
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  padding: 12px;
  background: linear-gradient(180deg, color-mix(in srgb, var(--bg-elev) 92%, #000 8%), var(--bg-elev));
}
#log{ /* cho tương thích code cũ */ }

/* Smooth scrollbar (Chromium/WebKit) */
#log::-webkit-scrollbar,
.scrollbox::-webkit-scrollbar{ width: 10px }
#log::-webkit-scrollbar-thumb,
.scrollbox::-webkit-scrollbar-thumb{
  background: color-mix(in srgb, var(--border) 55%, #000);
  border-radius: 999px;
  border: 3px solid transparent;
  background-clip: padding-box;
}

/* Messages */
.msg{ margin: 8px 0; padding: 6px 10px; border-radius: var(--r-sm); background: transparent; }
.msg.me{ background: color-mix(in srgb, var(--primary) 10%, transparent); }
.sys{ color: var(--muted); font-style: italic; }

/* Fine text */
small{ color: var(--muted); }

/* Pills (presence) */
.pill{
  display: inline-block;
  padding: 6px 10px;
  background: color-mix(in srgb, var(--primary) 12%, var(--bg-elev));
  border: 1px solid color-mix(in srgb, var(--primary) 30%, var(--border));
  color: var(--text);
  border-radius: 999px;
  font-size: 12px;
}

/* User badge */
.user-badge .user{ display: flex; align-items: center; gap: 12px; }
.avatar{
  width: 38px; height: 38px; border-radius: 50%;
  display: grid; place-items: center;
  font-weight: 700; color: #fff;
  background: conic-gradient(from 180deg, var(--primary), var(--primary-2), var(--primary));
  box-shadow: 0 6px 18px rgba(6,182,212,.25);
}
.user .who{ display: flex; flex-direction: column; line-height: 1.1 }
.user .who small{ color: var(--muted) }

/* Typing indicator smooth fade */
#typing{ opacity: 0; transition: opacity var(--dur) var(--ease) }
#typing:empty{ opacity: 0 }
#typing:not(:empty){ opacity: 1 }

/* Utility spacing for forms in cards */
.card .row:first-child input{ min-width: 0 } /* tránh tràn */
.card .row input#room{ flex: 1 }

/* Subtle enter animation for cards */
@keyframes cardIn{ from{ opacity:0; transform: translateY(6px) } to{ opacity:1; transform:none } }
.card{ animation: cardIn .25s var(--ease) both }

/* Links (nếu có) */
a{ color: color-mix(in srgb, var(--primary) 75%, var(--text)); text-decoration: none }
a:hover{ text-decoration: underline }

/* Toast-like success/error (nếu muốn dùng cùng .msg) */
.msg.ok{ color: var(--ok) }
.msg.err{ color: var(--err) }
